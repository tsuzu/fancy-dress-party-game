# YouTube音声当てゲーム 仕様書

## 1. プロジェクト概要

### 1.1 プロジェクト名
YouTube音声当てゲーム（YouTube Audio Quiz Game）

### 1.2 概要
YouTubeに投稿されているカバー曲の動画を使用し、映像を隠して音声のみを再生し、誰が歌っているかを当てるクイズゲーム。

### 1.3 目的
- エンターテイメント性の高いクイズゲームの提供
- YouTubeの埋め込み機能を活用した音声クイズの実現
- シンプルで直感的なUIによる快適なゲーム体験

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 ゲーム開始
- スタート画面の表示
- ゲーム説明の表示
- スタートボタンによるゲーム開始

#### 2.1.2 問題表示
- YouTube動画の埋め込み再生（映像は非表示）
- 問題文の表示
- 選択肢（複数）の表示
- 再生/一時停止ボタン
- 現在の問題番号と総問題数の表示

#### 2.1.3 回答機能
- 選択肢のクリックによる回答
- 正解/不正解の判定
- フィードバック表示（正解時・不正解時）
- 正解の場合、アーティスト名と説明を表示
- 不正解の場合、正解を表示

#### 2.1.4 スコア管理
- 正解数のカウント
- スコアの表示
- 最終結果の表示

#### 2.1.5 ゲーム進行
- 次の問題へ進む機能
- 全問題終了後の結果画面
- リスタート機能

### 2.2 追加機能（オプション）

- タイマー機能（制限時間内に回答）
- ヒント機能
- 難易度選択
- リーダーボード
- SNSシェア機能

## 3. 技術仕様

### 3.1 使用技術

- **HTML5**: マークアップ
- **CSS3**: スタイリング、アニメーション
- **JavaScript (ES6+)**: ゲームロジック
- **YouTube IFrame Player API**: 動画の埋め込みと制御
- **JSON**: 問題データの管理

### 3.2 対応ブラウザ

- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）

### 3.3 対応デバイス

- デスクトップ（PC）
- タブレット
- スマートフォン

## 4. ファイル構成

```
halloween/
├── index.html           # メインHTMLファイル
├── css/
│   └── style.css       # スタイルシート
├── js/
│   ├── script.js       # メインスクリプト
│   └── youtube-api.js  # YouTube API管理
├── data/
│   └── questions.json  # 問題データ
├── assets/
│   └── images/         # 画像ファイル（アイコン等）
├── SPEC.md             # 本仕様書
└── README.md           # プロジェクト説明
```

## 5. データ構造

### 5.1 問題データ（questions.json）

```json
{
  "questions": [
    {
      "id": 1,
      "videoId": "YouTube動画ID（11文字）",
      "startTime": 0,
      "question": "この曲を歌っているのは誰？",
      "options": [
        "アーティスト名1",
        "アーティスト名2",
        "アーティスト名3",
        "アーティスト名4"
      ],
      "correctAnswerIndex": 0,
      "explanation": "正解の説明やトリビア",
      "songTitle": "曲名",
      "originalArtist": "原曲アーティスト"
    }
  ]
}
```

### 5.2 ゲーム状態管理

```javascript
{
  currentQuestionIndex: 0,      // 現在の問題番号
  score: 0,                     // 正解数
  totalQuestions: 0,            // 総問題数
  isPlaying: false,             // 再生状態
  hasAnswered: false,           // 回答済みフラグ
  gameState: 'start'            // ゲーム状態（start, playing, result）
}
```

## 6. UI/UX仕様

### 6.1 画面構成

#### 6.1.1 スタート画面
- ゲームタイトル
- ゲーム説明
- スタートボタン

#### 6.1.2 ゲーム画面
- ヘッダー部分
  - スコア表示
  - 進捗表示（問題 X / Y）
- 動画エリア
  - YouTube埋め込み（映像は黒いオーバーレイで隠す）
  - 再生/一時停止ボタン
- 問題エリア
  - 問題文
  - 選択肢ボタン（4つ）
- フィードバックエリア
  - 正解/不正解表示
  - 説明文
  - 次へボタン

#### 6.1.3 結果画面
- 最終スコア表示
- 正解率
- メッセージ
- もう一度プレイボタン

### 6.2 カラースキーム

```css
/* 基本カラー */
--primary-color: #FF6B6B;      /* メインカラー（ボタン等） */
--secondary-color: #4ECDC4;    /* アクセントカラー */
--background-color: #1A1A2E;   /* 背景色 */
--text-color: #EAEAEA;         /* テキスト色 */
--correct-color: #51CF66;      /* 正解時 */
--incorrect-color: #FF6B6B;    /* 不正解時 */
```

### 6.3 レスポンシブブレークポイント

- デスクトップ: 1024px以上
- タブレット: 768px - 1023px
- スマートフォン: 767px以下

## 7. ゲームフロー

```
[スタート画面]
     ↓ (スタートボタンクリック)
[問題1表示]
     ↓ (動画自動再生開始)
[ユーザーが選択肢を選択]
     ↓
[正解/不正解判定]
     ↓
[フィードバック表示]
     ↓ (次へボタンクリック)
[問題2表示]
     ↓
     ... (繰り返し)
     ↓
[全問題終了]
     ↓
[結果画面表示]
     ↓ (もう一度プレイ)
[スタート画面へ戻る]
```

## 8. YouTube API仕様

### 8.1 使用するYouTube IFrame Player APIメソッド

- `onYouTubeIframeAPIReady()`: API準備完了時
- `new YT.Player()`: プレーヤー作成
- `playVideo()`: 再生
- `pauseVideo()`: 一時停止
- `stopVideo()`: 停止
- `loadVideoById()`: 動画読み込み
- `getPlayerState()`: 再生状態取得

### 8.2 プレーヤー設定

```javascript
{
  videoId: '動画ID',
  playerVars: {
    autoplay: 1,           // 自動再生
    controls: 0,           // コントロール非表示
    disablekb: 1,          // キーボード操作無効
    fs: 0,                 // フルスクリーン無効
    modestbranding: 1,     // YouTubeロゴ最小化
    rel: 0,                // 関連動画非表示
    showinfo: 0,           // 動画情報非表示
    iv_load_policy: 3,     // アノテーション非表示
    start: 0               // 開始時間（秒）
  }
}
```

## 9. アニメーション仕様

### 9.1 トランジション

- 画面遷移: フェードイン/アウト（0.3秒）
- ボタンホバー: 拡大（1.05倍、0.2秒）
- 選択肢選択: 色変化（0.2秒）

### 9.2 正解/不正解エフェクト

- 正解時: グリーンの点滅、スケールアニメーション
- 不正解時: レッドの点滅、シェイクアニメーション

## 10. パフォーマンス要件

- 初期読み込み時間: 3秒以内
- ボタンクリック反応時間: 100ms以内
- 動画読み込み開始: 1秒以内

## 11. セキュリティ考慮事項

- XSS対策: ユーザー入力のサニタイズ（現状は不要だが将来的に）
- YouTube動画IDのバリデーション
- JSONデータの検証

## 12. 今後の拡張案

- データベース連携（Firebase等）
- ユーザー登録・ログイン機能
- カスタム問題作成機能
- マルチプレイヤーモード
- カテゴリー別問題
- 難易度調整機能
- 実績・バッジシステム

## 13. 制約事項

- YouTube動画の埋め込み許可が必要
- インターネット接続必須
- YouTube APIの利用規約遵守
- 著作権に配慮したコンテンツ選定

## 14. テスト項目

### 14.1 機能テスト
- [ ] ゲーム開始機能
- [ ] 動画再生・停止機能
- [ ] 回答選択機能
- [ ] 正解判定機能
- [ ] スコア計算機能
- [ ] 次の問題へ遷移
- [ ] 結果画面表示
- [ ] リスタート機能

### 14.2 UIテスト
- [ ] レスポンシブデザイン（各デバイス）
- [ ] ボタンの動作
- [ ] アニメーション表示
- [ ] フィードバック表示

### 14.3 互換性テスト
- [ ] 各ブラウザでの動作確認
- [ ] モバイルデバイスでの動作確認

## 15. リリース計画

### Phase 1: MVP（最小機能製品）
- 基本的なゲームフロー
- 5-10問の問題データ
- シンプルなUI

### Phase 2: 機能拡張
- 追加問題（20-30問）
- アニメーション強化
- スコア保存機能

### Phase 3: 完成版
- 全機能実装
- デザイン最適化
- パフォーマンスチューニング

---

**更新履歴**
- 2025-11-02: 初版作成
